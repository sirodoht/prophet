{{define "page"}}
<main>
    <h1>128k.blog — long-form nostr</h1>

    {{if not .SessionNpub}}

        <div class="subtitle">
            login with npub. post with nsec.
        </div>
        <form method="post" action="/login">
            <p>
                <label for="npub">npub:</label>
                <input type="text" name="npub" id="npub">
            </p>
            <input type="submit" value="login">
        </form>

    {{else}}

        {{if .PostList}}
            {{range .PostList}}
            <div class="index-post">
                <a href="/posts/{{.ID}}" class="index-post-date">
                    {{ .CreatedAt.Format "Jan 02, 2006 15:04:05 UTC" }}
                </a>
                <div class="index-post-body">
                    {{.Body}}
                </div>
            </div>
            {{end}}

        {{else}}

        <em>(no posts)</em> — <a href="/new/post">create new</a>

        {{end}}

    {{end}}
</main>
{{end}}
